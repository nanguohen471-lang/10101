
<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <title>水墨象棋 · 單機AI</title>
  <meta name="theme-color" content="#3b2b1a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="水墨象棋">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/icon-180.png">
  <style>
    :root{
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);
      --ink:#111; --gold:#d8b46a; --gold-dark:#9a7a3f; --bg:#d7c3a3;
    }
    html,body{height:100%; margin:0; background:#2a1e12; overscroll-behavior:none;}
    #app{position:fixed; inset:0; padding:calc(var(--safe-top) + 6px) calc(var(--safe-right) + 6px) calc(var(--safe-bottom) + 6px) calc(var(--safe-left) + 6px); box-sizing:border-box; display:flex; flex-direction:column; gap:8px;}
    header{display:flex; align-items:center; gap:10px; background:url('assets/wood.jpg') center/cover; border-radius:10px; padding:6px; box-shadow:0 3px 10px rgba(0,0,0,.35);}
    .avatar{width:38px;height:38px;border-radius:6px;box-shadow:0 0 0 2px rgba(0,0,0,.5) inset;background:url('assets/avatar.png') center/cover;}
    .msg{flex:1; background:rgba(255,255,255,.78); border:1.5px solid #3d2b18; padding:6px 10px; border-radius:8px; font-family:-apple-system,BlinkMacSystemFont,'PingFang TC','Noto Sans TC',sans-serif; font-weight:700; color:#3b2b1a; letter-spacing:.5px;}
    main{flex:1; display:flex; align-items:center; justify-content:center; min-height:0;}
    #stage{position:relative; width:100%; height:100%; display:grid; place-items:center;}
    canvas{max-height:100%; max-width:100%; aspect-ratio: 9 / 14; border-radius:12px; background:url('assets/wood.jpg') center/cover; box-shadow:0 10px 26px rgba(0,0,0,.4);}
    footer{display:flex; gap:12px; justify-content:center;}
    .btn{flex:0 0 auto; min-width:120px; padding:10px 18px; border-radius:10px; border:2px solid #2b2012; color:#fff; background:linear-gradient(#5a4a2e,#3a2b17); font-weight:900; letter-spacing:2px; font-family:'Kaiti','STKaiti','DFKai-SB','PingFang TC',serif; box-shadow:0 3px 10px rgba(0,0,0,.5);}
    .btn:active{transform:translateY(1px);}
    /* Option modal */
    .modal{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center;}
    .dialog{background:url('assets/wood.jpg') center/cover; border-radius:12px; border:2px solid #3b2b1a; padding:16px; width:min(92vw,420px); box-shadow:0 10px 30px rgba(0,0,0,.6);}
    .dialog h3{margin:0 0 10px; color:#2b1c0e; font-family:-apple-system,BlinkMacSystemFont,'PingFang TC','Noto Sans TC',sans-serif;}
    .row{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 0;}
    select{padding:8px 12px; border-radius:10px; border:1.5px solid #2b1c0e; background:#fff; font-weight:700;}
    .close{margin-top:8px;}
  </style>
</head>
<body>
  <div id="app">
    <header>
      <div class="avatar"></div>
      <div id="msg" class="msg">現在該你走棋咯！</div>
    </header>
    <main>
      <div id="stage"><canvas id="game" width="630" height="980"></canvas></div>
    </main>
    <footer>
      <button class="btn" id="undo">悔 棋</button>
      <button class="btn" id="options">選 項</button>
      <button class="btn" id="restart">重 開</button>
    </footer>
  </div>

  <div class="modal" id="modal">
    <div class="dialog">
      <h3>遊戲選項</h3>
      <div class="row">
        <div>難度</div>
        <select id="difficulty">
          <option value="3">簡單</option>
          <option value="5" selected>入門</option>
          <option value="7">困難</option>
        </select>
      </div>
      <button class="btn close" id="close">關 閉</button>
    </div>
  </div>

  <script src="engine-canvas-skin.js"></script>
  <script src="sw-register.js"></script>
</body>
</html>
